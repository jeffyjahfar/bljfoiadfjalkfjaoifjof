/* What we do */
function Chart(e,t){var n={fillStyle:"rgba(0,0,0,0.5)",opacity:.8,selector:"#process-graph",identifier:""};this.opts=$.extend({},n,t);this.canvas=$("<canvas></canvas>").attr("id",this.opts.id);if(typeof G_vmlCanvasManager!="undefined"){G_vmlCanvasManager.initElement(this.canvas[0])}var r=$(this.opts.selector);this.canvas.appendTo(r);this.setSize(r.width(),r.height());this.context=this.canvas[0].getContext("2d");this.data_points=e;this.animation={interval:null,started:null,duration:600,progress:0};var i=this;$(window).resize(function(){var e=$(i.opts.selector);i.setSize(e.width(),e.height());i.renderFrame(i.animation.progress)})}function NodesDiagram(e){var t={selector:"#nodes"};this.opts=$.extend({},t,e);this.canvas=$("<canvas></canvas>").appendTo($(this.opts.selector));this.canvas[0].width=this.opts.width;this.canvas[0].height=this.opts.height;this.context=this.canvas[0].getContext("2d");this.source_canvas=$("<canvas></canvas>");this.source_canvas[0].width=this.opts.width;this.source_canvas[0].height=this.opts.height;this.source_context=this.source_canvas[0].getContext("2d");this.source_context.drawImage(this.opts.img,0,0);this.imagedata=this.source_context.getImageData(0,0,this.opts.width,this.opts.height);this.animation={timer:null,interrupt:false,delay:5};this.nodes={hot:[]}}Chart.prototype.setSize=function(e,t){this.opts.width=e;this.opts.height=t;this.canvas[0].width=e;this.canvas[0].height=t};Chart.prototype.startAnimation=function(){if(this.animation.interval!=null){clearInterval(this.animation.interval);this.animation.interval=null}this.animation.started=(new Date).getTime();this.renderFrame(0);var e=this;this.animation.interval=setInterval(function(){var t=(new Date).getTime();var n=t-e.animation.started;n=n>e.animation.duration?e.animation.duration:n;var r=n/e.animation.duration;e.renderFrame(r);e.animation.progress=r;if(n>=e.animation.duration){clearInterval(e.animation.interval);e.animation.interval=null}},30)};Chart.prototype.renderFrame=function(e){e=e<0?0:e>1?1:e;e=this.easeInOutBack(e,e*this.animation.duration,this.animation.duration);this.canvas[0].width=this.canvas[0].width;this.context.fillStyle=this.opts.fillStyle;this.context.beginPath();this.context.moveTo(0,this.opts.height);for(var t=0;t<this.data_points.length;t++){var n=this.data_points[t];var r={x:Math.round(n.x*this.opts.width),y:Math.round((1-e*n.y)*this.opts.height)};this.context.lineTo(r.x,r.y)}this.context.lineTo(this.opts.width,this.opts.height);this.context.fill();this.context.closePath()};Chart.prototype.easeInOutBack=function(e,t,n){var r=0;var i=1;var s=1.70158;if((t/=n/2)<1)return i/2*t*t*(((s*=1.525)+1)*t-s)+r;return i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+r};NodesDiagram.prototype.startAnimation=function(){this.context.fillStyle="rgba(255,255,255,1)";this.context.strokeStyle="rgba(255,255,255,1)";this.context.lineWidth=1;this.context.fillRect(0,0,this.opts.width,this.opts.height);this.context.globalCompositeOperation="destination-out";$("#dna-bg").show();this.nodes.hot=[{x:1072,y:58},{x:1414,y:58},{x:1840,y:41},{x:761,y:75},{x:293,y:58}];this.renderStep();var e=this};NodesDiagram.prototype.fillPixel=function(e){var t=this.pixelAtPoint(e);this.context.fillStyle="rgba(0,0,0,"+t[3]/255+")";this.context.fillRect(e.x,e.y,1,1)};NodesDiagram.prototype.clearPixel=function(e){var t=e.y*this.opts.width*4;var n=e.x%this.opts.width*4;var r=n+t;this.imagedata.data[r+3]=0};NodesDiagram.prototype.markPixel=function(e){var t=e.y*this.opts.width*4;var n=e.x%this.opts.width*4;var r=n+t;this.imagedata.data[r+1]=255};NodesDiagram.prototype.renderStep=function(){if(this.animation.interrupt){return}var e=this.nodes.hot.slice();var t=[];for(var n=0;n<e.length;n++){var r=e[n];this.fillPixel(r);this.clearPixel(r);var i=this.getSurroundingPoints(r);for(var s=0;s<i.length;s++){t.push(i[s])}}if(t.length>0){this.nodes.hot=t;var o=this;this.animation.timer=setTimeout(function(){o.renderStep()},this.animation.delay)}else{}};NodesDiagram.prototype.getSurroundingPoints=function(e){var t=[];for(var n=-1;n<=1;n++){_newx=e.x+n;if(_newx>=0&&_newx<=this.opts.width-1){for(var r=-1;r<=1;r++){if(!(n==0&&r==0)){_newy=e.y+r;if(_newy>=0&&_newy<=this.opts.height-1){var i={x:_newx,y:_newy};var s=this.pixelAtPoint(i);if(s[1]==0&&s[3]>0){this.markPixel(i);t.push(i)}}}}}}return t};NodesDiagram.prototype.pixelAtPoint=function(e){var t=e.y*this.opts.width*4;var n=e.x%this.opts.width*4;var r=n+t;var i=[this.imagedata.data[r],this.imagedata.data[r+1],this.imagedata.data[r+2],this.imagedata.data[r+3]];return i};var data_points={discover:[{x:0,y:0},{x:.07,y:.575},{x:.15,y:.36},{x:.272,y:.32},{x:.31,y:.1},{x:.49,y:0}],design:[{x:0,y:0},{x:.15,y:.15},{x:.31,y:.66},{x:.37,y:.61},{x:.42,y:.75},{x:.5,y:.38},{x:.83,y:0}],implement:[{x:.36,y:0},{x:.4,y:.11},{x:.53,y:.72},{x:.58,y:.42},{x:.64,y:.25},{x:.72,y:.25},{x:.87,y:0}],develop:[{x:.41,y:0},{x:.56,y:.28},{x:.65,y:.84},{x:.71,y:.75},{x:.82,y:.26},{x:.96,y:0}],deliver:[{x:.6,y:0},{x:.82,y:.72},{x:.935,y:.475},{x:1,y:0}]};var process_charts={discover:null,design:null,implement:null,develop:null,deliver:null};$(function(){process_charts.discover=new Chart(data_points.discover,{fillStyle:"rgba( 80, 177, 170, 0.8)",selector:"#process-graph",id:"chart-discover"});process_charts.design=new Chart(data_points.design,{fillStyle:"rgba( 245, 122, 115, 0.8)",selector:"#process-graph",id:"chart-design"});process_charts.implement=new Chart(data_points.implement,{fillStyle:"rgba( 255, 181, 102, 0.8)",selector:"#process-graph",id:"chart-implement"});process_charts.develop=new Chart(data_points.develop,{fillStyle:"rgba( 67, 192, 230, 0.8)",selector:"#process-graph",id:"chart-develop"});process_charts.deliver=new Chart(data_points.deliver,{fillStyle:"rgba( 96, 102, 106, 0.8)",selector:"#process-graph",id:"chart-deliver"});var e=false;var t=function(){if(!e){var t=$(window).scrollTop()+$(window).height()*.8;var n=$("#process-graph").offset().top;if(n<t){e=true;var r=process_charts.discover.animation.duration;var i=$(window).width();if(i>767){$("#process-details article").each(function(){$(this).css({opacity:0,visibility:"visible"})})}process_charts.discover.startAnimation();if(i>767){$("#p1").animate({opacity:1},r)}setTimeout(function(){process_charts.design.startAnimation();if(i>767){$("#p2").animate({opacity:1},r)}},200);setTimeout(function(){process_charts.implement.startAnimation();if(i>767){$("#p3").animate({opacity:1},r)}},400);setTimeout(function(){process_charts.develop.startAnimation();if(i>767){$("#p4").animate({opacity:1},r)}},600);setTimeout(function(){process_charts.deliver.startAnimation();if(i>767){$("#p5").animate({opacity:1},r)}},800)}}};t();$(window).scroll(function(){t()});var n=false;$(".process.pagination").html("");var r=function(){if($(window).width()<768){if(!n){$("#process-details article").each(function(){$(this).css({opacity:1,visibility:"visible"})});$("#process-details").cycle({pauseOnHover:true,speed:500,slides:"> article",swipe:true,autoHeight:1,pager:".process.pagination",pagerTemplate:"<li><a href=#> {{slideNum}} </a></li>"});n=true}}else{if(n){$("#process-details").cycle("destroy");n=false;$("#process-details article").each(function(){$(this).css({opacity:1,visibility:"visible"})})}}};$(window).resize(function(){r()});r();if(!$("html").hasClass("ie")){var i=false;function s(){if(i){return}i=true;var e=new Image;var t;var n=false;var r=false;e.src="/wp-content/themes/epic/img/dna.png";var s=function(){if($(window).width()>767){if(r&&!n){var e=$(window).scrollTop()+$(window).height()*.8;var i=$("#device").offset().top;if(i<e){n=true;t.startAnimation()}}}};e.onload=function(){t=new NodesDiagram({img:e,selector:"#dna-mask",width:2200,height:143});r=true;s()};$(window).scroll(function(){s()})}if($(window).width()>767){s()}$(window).resize(function(){if($(window).width()>767){s()}})}})